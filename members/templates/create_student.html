{% extends 'base.html' %}

{% block content %}
<h2>Add New Student</h2>

<div class="section-container">
    <div class="section-header">
        <h3>Student Information</h3>
    </div>

    <form method="POST" action="{% url 'create_student' %}">
        {% csrf_token %}
        <div class="form-group">
            <label for="studentName">Name</label>
            <input type="text" id="studentName" name="name" class="form-control" required>
            <small class="form-text">Enter the full name of the student</small>
        </div>
        
        <div class="form-group">
            <label for="studentEmail">Email</label>
            <input type="email" id="studentEmail" name="email" class="form-control" required>
            <small class="form-text">Enter a valid email address</small>
        </div>
        
        <div class="form-group">
            <label for="studentPhone">Phone Number</label>
            <input type="text" id="studentPhone" name="phone_number" class="form-control" required>
            <small class="form-text">Enter a valid contact number</small>
        </div>
        
        <div class="form-group">
            <label for="fatherName">Father Name</label>
            <input type="text" id="fatherName" name="father_name" class="form-control">
            <small class="form-text">Optional: Enter father's name</small>
        </div>
        
        <div class="form-group">
            <label for="address">Address</label>
            <textarea id="address" name="address" rows="3" class="form-control"></textarea>
            <small class="form-text">Enter the residential address</small>
        </div>
        
        <div class="form-group">
            <label for="department">Department</label>
            <input type="text" id="department" name="department" class="form-control">
            <small class="form-text">Enter the student's department or course</small>
        </div>
       
        <div class="form-group">
            <label for="room">Room Assignment</label>
            <select name="room" id="room" class="form-control" required>
                {% for room in rooms %}
                    {% if room.remaining_capacity <= 0 %}
                        <option value="{{ room.id }}" disabled style="color: grey;">
                            Room {{ room.room_number }} (Full)
                        </option>
                    {% else %}
                        <option value="{{ room.id }}">
                            Room {{ room.room_number }} ({{ room.remaining_capacity }} spots left)
                        </option>
                    {% endif %}
                {% endfor %}
            </select>
            <small class="form-text">Select a room to assign to this student</small>
        </div>
        
        <input type="hidden" name="is_active" value="True">
        
        <button type="submit" class="btn">Add Student</button>
        <a href="{% url 'manage_students' %}" class="btn btn-secondary">Back</a>
    </form>
</div>
{% endblock %}
